<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Ürün Açıklayıcı</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 min-h-screen flex items-center justify-center px-4">
    <div class="bg-white p-6 rounded-xl shadow-xl w-full max-w-md">
      <h1 class="text-2xl font-bold mb-4 text-center">🛍️ AI Ürün Açıklayıcı</h1>
      <label for="language" class="block mb-2 font-medium"
        >Açıklama Dili:</label
      >
      <select id="language" class="w-full p-3 border rounded mb-4">
        <option value="tr">Türkçe</option>
        <option value="en">English</option>
      </select>
      <label for="category" class="block mb-2 font-medium"
        >Ürün Kategorisi:</label
      >
      <select id="category" class="w-full p-3 border rounded mb-4">
        <option value="diğer">Diğer</option>
        <option value="giyim">Giyim</option>
        <option value="ayakkabı">Ayakkabı</option>
        <option value="aksesuar">Aksesuar</option>
        <option value="elektronik">Elektronik</option>
        <option value="bilgisayar">Bilgisayar / Tablet</option>
        <option value="telefon">Telefon / Aksesuar</option>
        <option value="ev">Ev Ürünleri</option>
        <option value="mutfak">Mutfak Gereçleri</option>
        <option value="mobilya">Mobilya</option>
        <option value="dekorasyon">Dekorasyon</option>
        <option value="kozmetik">Kozmetik</option>
        <option value="kişisel bakım">Kişisel Bakım</option>
        <option value="kitap">Kitap</option>
        <option value="oyuncak">Oyuncak</option>
        <option value="bebek">Bebek Ürünleri</option>
        <option value="anne">Anne Ürünleri</option>
        <option value="spor">Spor / Outdoor</option>
        <option value="evcil">Evcil Hayvan Ürünleri</option>
        <option value="otomobil">Otomobil Aksesuarları</option>
      </select>

      <label for="length" class="block mb-2 font-medium"
        >Açıklama Uzunluğu:</label
      >
      <select id="length" class="w-full p-3 border rounded mb-4">
        <option value="kısa">Kısa (1–2 cümle)</option>
        <option value="orta" selected>Orta (3–5 cümle)</option>
        <option value="uzun">Uzun (detaylı açıklama)</option>
      </select>

      <input
        id="productInput"
        type="text"
        placeholder="Ürün adını yazın..."
        class="w-full p-3 border rounded mb-4"
      />
      <button
        id="generateBtn"
        class="w-full bg-blue-600 text-white p-3 rounded-md hover:bg-blue-700 transition font-semibold"
      >
        Açıklama Oluştur
      </button>
      <div id="result" class="mt-6 text-gray-700 whitespace-pre-wrap"></div>
      <button
        id="copyBtn"
        class="hidden w-full bg-green-600 text-white p-2 rounded-md hover:bg-green-700 transition font-medium mt-4"
      >
        Açıklamayı Kopyala
      </button>
      <a
        href="https://www.buymeacoffee.com/enginkayalw"
        target="_blank"
        class="flex justify-center mt-6 text-center"
      >
        <img
          src="./images/yellow-button.png"
          alt="Buy Me a Coffee"
          style="height: 50px; width: auto"
        />
      </a>
    </div>

    <script>
      document
        .getElementById("generateBtn")
        .addEventListener("click", async () => {
          const productName = document
            .getElementById("productInput")
            .value.trim();
          const lang = document.getElementById("language").value;
          const category = document.getElementById("category").value;

          const copyBtn = document.getElementById("copyBtn");

          if (!productName) {
            alert("Lütfen bir ürün adı girin.");
            return;
          }

          document.getElementById("result").innerText = "AI yazıyor...";
          copyBtn.classList.add("hidden"); // önce gizle

          const systemPrompt =
            lang === "tr"
              ? "Sen bir e-ticaret metin yazarı AI'sısın. Kullanıcı sana bir ürün adı verecek ve sen ona kısa ama ikna edici bir ürün açıklaması yazacaksın. Dil: Türkçe."
              : "You are an AI e-commerce copywriter. The user will give you a product name, and you will return a short but compelling product description in English.";

          const userPrompt =
            lang === "tr"
              ? `Ürün adı: ${productName}. Kategori: ${category}. Açıklama uzunluğu: ${length}.`
              : `Product name: ${productName}. Category: ${category}. Description length: ${length}.`;

          try {
            const response = await fetch(
              "https://api.groq.com/openai/v1/chat/completions",
              {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                  Authorization:
                    "Bearer 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",
                },
                body: JSON.stringify({
                  model: "llama3-8b-8192",
                  messages: [
                    { role: "system", content: systemPrompt },
                    { role: "user", content: userPrompt },
                  ],
                }),
              }
            );

            const data = await response.json();
            const result =
              data?.choices?.[0]?.message?.content ||
              "AI'dan anlamlı yanıt alınamadı.";

            document.getElementById("result").innerText = result;
            copyBtn.classList.remove("hidden"); // başarıyla geldiyse butonu göster
          } catch (error) {
            console.error("Hata:", error);
            document.getElementById("result").innerText =
              "Bir hata oluştu: " + error.message;
          }
        });

      document.getElementById("copyBtn").addEventListener("click", () => {
        const text = document.getElementById("result").innerText;
        navigator.clipboard
          .writeText(text)
          .then(() => {
            const btn = document.getElementById("copyBtn");
            btn.innerText = "✔️ Kopyalandı!";
            setTimeout(() => {
              btn.innerText = "Açıklamayı Kopyala";
            }, 2000);
          })
          .catch((err) => {
            alert("Kopyalama başarısız: " + err);
          });
      });
    </script>
  </body>
</html>
